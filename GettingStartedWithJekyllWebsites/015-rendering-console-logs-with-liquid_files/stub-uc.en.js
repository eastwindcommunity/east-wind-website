"use strict";function MSIsPlayback(){try{return parent&&parent.WebPlayer}catch(e){return!1}}function prepareEditor(e){var t=e.postfix||"",n=function(){setTimeout(function(){StackExchange.editor.initIfShown(e)},1)};if(!e.onDemand)return StackExchange.using("editor",n),void 0;for(var i="bold-button italic-button spacer1 link-button quote-button code-button image-button spacer2 olist-button ulist-button heading-button hr-button spacer3 undo-button redo-button".split(" "),o=$('<ul id="wmd-button-row'+t+'" class="wmd-button-row" />').appendTo(".wmd-button-bar"),r=0,a=0;a<i.length;a++){var s=i[a],c=/spacer/.test(s),u=$("<li id='wmd-"+s+t+"' />").prop("className","wmd-"+(c?"spacer":"button")).css("left",25*a).appendTo(o);$("<span />").css("background-position",r+"px -20px").appendTo(u),c||(r-=20)}var l=!1;$("#wmd-input, #title, #tagnames, #edit-comment, #m-address, #display-name").one("focus click keydown",function(){if(!l){l=!0;var t=function(){o.remove(),e.autoShowMarkdownHelp&&(e.immediatelyShowMarkdownHelp=!0),n()};o.addSpinner({"float":"right"}),StackExchange.using("editor",t)}})}if(window.StackExchange={},!MSIsPlayback()&&top!=self)throw top.location.replace(document.location),$(function(){$("head").add("body").remove()}),alert("For security reasons, framing is not allowed; click OK to remove the frames."),new Error;if(StackExchange.init=function(){function e(){$(document).on("click",".convert-to-post",function(e){e.preventDefault();var t=$(this).attr("data-confirm");if(!t||confirm(t)){var n=$("<form method='post'/>").attr("action",$(this).attr("href")).appendTo("body");n.append($("<input type='hidden' name='fkey' />").attr("value",$(this).attr("data-fkey"))).submit()}})}function t(){function e(e){StackExchange.options.user.fkey!==e&&(StackExchange.options.user.fkey=e,$("input[name=fkey]").val(e))}function t(e,t){try{localStorage.setItem(i,e+","+t)}catch(n){}}function n(){var e=localStorage.getItem(i);if(!e)return{"time":0};var t=e.split(/,/);return{"fkey":t[0],"time":parseInt(t[1],10)}}var i="se:fkey";$(window).on("storage",function(t){t=t.originalEvent,t.key==i&&t.newValue&&e(t.newValue.split(/,/)[0])});try{var o=StackExchange.options.user.fkey,r=n();r.fkey!==o&&(StackExchange.options.serverTime>r.time?t(o,StackExchange.options.serverTime):e(r.fkey))}catch(a){}}function n(){if(StackExchange.options.timingsGuid&&window.performance&&window.performance.timing){var e=window.performance.timing,t=e.navigationStart,n={"guid":StackExchange.options.timingsGuid,"Info":StackExchange.options.timingsInfo};for(var i in e)0!==e[i]&&(n[i]=0===e[i]?null:e[i]-t);$.post("/client-timings",n)}}function i(){var e,t=$("#hot-network-questions");if(t.length&&(e=t.find(".js-show-more")).length){var n=t.find(".js-hidden");e.click(function(){return n.show(),e.remove(),!1});var i=$("#mainbar").height(),o=$("#sidebar").height()+550;i>o&&(n.each(function(){return o+=$(this).show().height(),i>o}),0==n.filter(":hidden").length&&e.remove())}}var o=function(e){if(!window.jQuery){if("complete"!=document.readyState)return setTimeout(function(){o(e)},1e3),void 0;var t=document.createElement("div");t.id="noscript-padding";var n=document.createElement("div");n.id="noscript-warning",n.innerHTML=function(e){return e.siteName+" requires external JavaScript from another domain, which is blocked or failed to load."}({"siteName":e}),document.body.insertBefore(t,document.body.firstChild),document.body.appendChild(n)}},r=function(){var e=function(e){e?$(e).trigger("popupClose").fadeOutAndRemove():($("#lightbox:not(.no-esc-remove), .message-dismissable, .popup:not(.no-auto-close), .share-tip, .esc-remove").fadeOutAndRemove(),$(".esc-hide").fadeOut(),window.genuwine&&genuwine.isVisible()&&genuwine.click(),window.profileLink&&profileLink.hide(),StackExchange.topbar&&StackExchange.topbar.hideAll(),$("#lightbox:not(.no-esc-remove), .message-dismissable, .popup:not(.no-auto-close), .share-tip, .esc-remove, .esc-hide").trigger("popupClose",{"closeTrigger":"esc"}))};$(document).keyup(function(t){27==t.which&&e()}),$("body").mousedown(function(e){var t=$(e.target);if(!t.closest(".ac_results, .popup").length){if(!t.closest(".popup").length){if(1!=e.which)return;$(".popup:not(.no-auto-close), #lightbox").fadeOutAndRemove().trigger("popupClose",{"closeTrigger":"click outside"})}t.closest(".share-tip").length||$(".share-tip").fadeOutAndRemove().trigger("popupClose",{"closeTrigger":"click outside"}),t.closest(".wmd-prompt-dialog").length||$(".wmd-prompt-dialog, .wmd-prompt-background").fadeOutAndRemove().trigger("popupClose",{"closeTrigger":"click outside"})}}),$(document).bind("closePopups",function(t){e(t.selectorToClose)})},a=function(){var e,t=$("#hlinks"),n=$("#search input[name=q]"),i=n.width(),o=2.5*i,r="expand",a=100,s=function(e){n.queue(r,e)},c=function(){n.dequeue(r)},u=!1,l=!("placeholder"in document.createElement("input"));l&&!StackExchange.options.isMobile&&(""==n[0].value&&(n[0].value="search"),n.bind({"focus":function(){"search"==this.value&&(this.value="")}})),n.keydown(function(i){return u||i.keyCode<46&&8!=i.keyCode&&32!=i.keyCode?!0:(u=!0,clearTimeout(e),n.clearQueue(r),s(function(e){n[0].placeholder="",t.fadeOut(a,e)}),s(function(e){n.animate({"width":o,"max-width":o},a,e)}),s(function(){0==n.parent().find(".search-prompt").length&&n.before('<span class="search-prompt">search:</span>')}),3==n.queue(r).length&&c(),void 0)}).focusout(function(){e=setTimeout(function(){s(function(e){n.parent().find(".search-prompt").remove(),e()}),s(function(e){n.animate({"width":i,"max-width":i},a,e)}),s(function(e){l&&""==n[0].value&&(n[0].value="search"),n[0].placeholder="search",t.fadeIn(a,e)}),3==n.queue(r).length&&c(),u=!1},200)}),$("#search").keydown(function(e){return 13==e.which&&e.ctrlKey&&n.val()?(window.open("/search?q="+encodeURIComponent(n.val()),"_newtab"),!1):void 0}).find("input[name=q]").keyup(function(e){27==e.which&&$(this).blur()})};return function(s){StackExchange.options=s,s.serverTimeOffsetSec=s.serverTime-(new Date).getTime()/1e3,o(s.site.name),$.ajaxSetup({"cache":!1}),StackExchange.init.createJqueryExtensions(),s.enableLogging=s.user.isEmployee&&"undefined"!=typeof console&&"undefined"!=typeof console.log,$(function(){r(),a(),t(),e(),StackExchange.using(StackExchange.options.user.isAnonymous?"anonymous":"loggedIn",function(){StackExchange.initialized.resolve()},!0,s.fullPostfix);var o=StackExchange.options.styleCodeAdditionalLang;o&&StackExchange.ifUsing("prettify",function(){return StackExchange.loadJsFile("third-party/prettify/additional-langs/"+o)}),StackExchange.ready(function(){genuwine.init(s.user.accountId||null,s.user.inboxUnviewedCount,s.user.notificationsUnviewedCount),s.user.messages&&StackExchange.notify.showMessages(s.user.messages,s.isMobile),s.site.globalAuthDisabled||(!s.site.isChildMeta&&s.user.isAnonymous&&gauth.checkStackAuth(s.stackAuthUrl),gauth.informStackAuth(s.stackAuthUrl)),s.user.isAnonymous||profileLink.init(s.user.gravatar,s.isMobile,s.user.profileUrl+"?tab=activity",s.serverTimeOffsetSec),s.enableUserHovercards&&StackExchange.usermenu.init(),StackExchange.tagPreferences?StackExchange.tagPreferences.init():StackExchange.tagmenu.init(),s.timingsGuid&&$(window).load(function(){setTimeout(n,50)}),$("*[data-tracker]").track(),i()})})}}(),StackExchange.debug={"log":function(){},"init":function(){this.log=function(e){$(function(){var t=$("#debug-messages");t.length||(t=$("<div id='debug-messages' style='text-align:left;position:fixed;top:50px;left:50px;z-index:1000;background:white;border:2px solid black;width:300px;padding:10px;' />").append($("<span style='cursor:pointer;color:#999'>(close debug messages)</span>").click(function(){$("#debug-messages").remove()})).appendTo("body")),$("<div style='margin-top:10px' />").text(e).appendTo(t)})}}},StackExchange.initialized=$.Deferred(),StackExchange.ready=function(e){StackExchange.initialized.done(e)},window.serq)for(var i=0;i<window.serq.length;i++)StackExchange.ready(window.serq[i]);!function(){var e,t={"anonymous":"full-anon.js","loggedIn":"full.js","prettify":"prettify-full.js","pseudoModerator":"moderator.js","inlineEditing":"full.js","editor":"wmd.js","autocomplete":"third-party/jquery.autocomplete.min.js","tagAutocomplete":"tageditor.js","tagEditor":"tageditornew.js","tagSuggestions":"tagsuggestions.js","mobile":"mobile.js","help":"help.js","inlineTagEditing":"inline-tag-editing.js","mathjaxEditing":"mathjax-editing.js","revisions":"revisions.js","mockups":"external-editor.js","schematics":"external-editor.js","review":"review.js","translation":"full.js","gps":"full-anon.js","postValidation":"post-validation.js","exploreQuestions":"explore-qlist.js","eventCharts":"events.js","virtualKeyboard":"virtual-keyboard.js"},n={},i={},o={},r={},a={},s=function(e,t){return function(n){var i=e[n];return i||(i=e[n]=t(n)),i}},c=function(e){var t,n,i=o[e],r=$.Deferred(),a=$.when(r);if(i)for(var t=0;t<i.length;t++)n=i[t].call(null),n&&$.isFunction(n.promise)&&(a=$.when(a,n));return r.resolve(),a},u=function(){if(!e){var t=$("script[src]").filter(function(){return/stub.*\.js/.test($(this).attr("src"))}).first();0==t.length?(StackExchange.debug.log("couldn't figure out location of stub.js"),e="/content/js/"):e=t.attr("src").replace(/\/stub.*\.js.*$/,"/")}return e},l=function(e){var t=a["js/"+e];return t?"?v="+t:(StackExchange.debug.log("no cache breaker for "+e),"")},d=function(e){return e&&StackExchange.options.locale&&-1==e.indexOf("third-party")&&(e=e.replace(/^(.*)(.js)(\?.*)?$/,"$1."+StackExchange.options.locale+"$2$3")),e},h=function(e,t){var n=$.Deferred(),i=document.createElement("script");return i.async="async",i.src=t?e:d(e),i.onload=i.onreadystatechange=function(e,t){(!i.readyState||/loaded|complete/.test(i.readyState))&&(t?n.reject():n.resolve())},i.onerror=function(){n.reject()},$("head")[0].appendChild(i),n.promise()},f=function(e){var n=t[e];return n?p(n):$.Deferred().reject().promise()},p=s(i,function(e){return h(u()+e+l(d(e)))}),m=s(n,function(e){function t(){return(i=StackExchange[e])?(c(e).done(function(){n.resolve()}),void 0):o>0?(o--,StackExchange.debug.log("retrying "+e),setTimeout(t,20),void 0):(StackExchange.debug.log("object "+e+" not available although file was loaded"),n.reject(),void 0)}var n=$.Deferred(),i=StackExchange[e],o=3;return i?n.resolve():f(e).done(t).fail(n.reject),n.promise()}),g=$.Deferred(),v=function(e,n,i,o){if(!i&&!g.isResolved())return g.done(function(){v(e,n)}),void 0;if(i)for(var r in t)t.hasOwnProperty(r)&&(t[r]=t[r].replace(/^(full(?:-anon)?).js$/,"$1"+(o||"")+".js"));var a=m(e);return i?g.resolve():a=$.when(a,StackExchange.initialized),a.done(function(){n()}).fail(function(){StackExchange.debug.log("failed to provide object "+e)}),a};v.setCacheBreakers=function(e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])};var b=function(e,t,n){if("undefined"!=typeof n){if(r["u_"+n])return;r["u_"+n]=!0}if(StackExchange[e])return t(),void 0;var i=o[e];i||(i=o[e]=[]),i.push(t)};StackExchange.using=v,StackExchange.ifUsing=b,StackExchange.loadJsFile=function(e,t){return h(u()+e,t)}}(),String.prototype.formatUnicorn=function(){var e=this.toString();if(!arguments.length)return e;var t=typeof arguments[0],n="string"==t||"number"==t?Array.prototype.slice.call(arguments):arguments[0];for(var i in n)e=e.replace(new RegExp("\\{"+i+"\\}","gi"),n[i]);return e},String.prototype.truncate=function(e,t){var n=this.toString();return e&&n.length>e&&(n=n.substr(0,e)+t),n},String.prototype.splitOnLast=function(e){var t=this.lastIndexOf(e);return 0>t?[this]:[this.substr(0,t),this.substr(t)]},String.prototype.contains=function(e){return this.indexOf(e)>-1},StackExchange.init.createJqueryExtensions=function(){var e=StackExchange.helpers;$.extend($.expr[":"],{"working":function(e){var t=$(e).data("working");return"undefined"!=typeof t&&t},"data":function(e,t,n){var i=n[3],o=$(e).data(i);switch(typeof o){case"undefined":return!1;case"boolean":return o;case"object":return null!==o}return!0},"containsCI":function(e,t,n){return jQuery(e).text().toUpperCase().indexOf(n[3].toUpperCase())>=0}}),$.fn.extend({"working":function(e){return this.each(function(){$(this).data("working",e)})},"track":function(){return this.each(function(){var e=$(this),t=e.is("a[href]")?e:e.find("a[href]"),n=e.data("tracker");t.each(function(){var e=this.href.splitOnLast("#"),t=e[0];t+=(t.contains("?")?"&":"?")+n+(e[1]||""),this.href=t})})},"fadeOutAndRemove":function(){return this.each(function(){var e=$(this);e.fadeOut("fast",function(){e.trigger("removing").remove()})})},"charCounter":function(t){return this.each(function(){var n=t.target?$(t.target):$(this).parents("form").find("span.text-counter"),i=this,o=function(){var e=t.min,o=t.max,r=t.setIsValid||function(){},a=i.value?i.value.replace(/\r\n/g,"\n").length:0,s=a>.8*o?"supernova":a>.6*o?"hot":a>.4*o?"warm":"cool",c="";if(0==a)0==e?(c=function(e){return 1==e.max?"enter up to "+e.max+" characters":"enter up to "+e.max+" characters"}({"max":o}),r(!0)):(c=function(e){return 1==e.min?"enter at least "+e.min+" character":"enter at least "+e.min+" characters"}({"min":e}),r(!1));else if(e>a)c=function(e){return 1==e.count?e.count+" more to go...":e.count+" more to go..."}({"count":e-a}),r(!1);else{var u=o-a;c=u>=0?function(e){return 1==e.count?e.count+" character left":e.count+" characters left"}({"count":u}):function(e){return 1==e.count?"too long by "+e.count+" character":"too long by "+e.count+" characters"}({"count":Math.abs(u)}),r(o>=a)}n.text(c),n.hasClass(s)||n.removeClass("supernova hot warm cool").addClass(s)};$(this).bind("blur focus keyup paste charCounterUpdate",e.DelayedReaction(o,100,{"sliding":!0}).trigger)})},"selectRange":function(e,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}})},"addSpinner":function(t){return this.each(function(){e.addSpinner(this,t)})},"addSpinnerAfter":function(t){return this.each(function(){$(this).after(e.getSpinnerImg(t))})},"addSpinnerBefore":function(t){return this.each(function(){$(this).before(e.getSpinnerImg(t))})},"removeSpinner":function(){return this.each(function(){$(this).find("img.ajax-loader").remove()})},"showErrorMessage":function(t,n){return this.each(function(){e.showErrorMessage(this,t,n)})},"showErrorPopup":function(t,n){return this.each(function(){e.showErrorMessage(this,t,n)})},"showInfoMessage":function(t,n){return this.each(function(){e.showInfoMessage(this,t,n)})},"center":function(e){e=e||{};var t=this.parent();"static"===t.css("position")&&(t=t.offsetParent());var n=t.offset(),i=$(window),o=e.top||Math.max((i.height()-this.outerHeight())/2+i.scrollTop()-n.top+(e.dy||0),0);this.css("position","absolute"),this.css("top",o+"px");var r=Math.max(20,(i.width()-this.outerWidth())/2+i.scrollLeft()-n.left);this.css("left",r+"px");var a="calc(50% - "+this.outerWidth()/2+"px)";return this.css("left",a),this.css("left","-webkit-"+a),this},"helpOverlay":function(){return e.bindHelpOverlayEvents(this),this},"hideHelpOverlay":function(){return e.hideHelpOverlay(this),this},"enable":function(){return 0==arguments.length||arguments[0]?this.removeAttr("disabled").css("cursor","pointer").removeClass("disabled-button"):this.attr("disabled","disabled").css("cursor","default").addClass("disabled-button"),this},"disable":function(){return this.enable(!1)},"loadPopup":function(t){var n=this;return n.addSpinnerAfter({"padding":"0 3px"}),$.ajax({"type":"GET","url":t.url,"dataType":"html","success":function(e){var i=$(e).elementNodesOnly();i.find(".popup-actions-cancel, .popup-close a").click(function(){StackExchange.helpers.closePopups(".popup"),t.lightbox&&$("#lightbox").fadeOutAndRemove()}),i.find("input:radio[disabled=disabled] + label.action-label").addClass("action-disabled"),t.hideDescriptions&&i.find("ul.action-list > li:not(.action-selected) .action-desc").hide();var o=i.find("input:radio:not(.action-subform input)");o.closest("li").bind("hide-action",function(){var e=$(this),n=".action-subform"+(t.hideDescriptions?", .action-desc":"");e.removeClass("action-selected").find(n).slideUp("fast")}).bind("show-action",function(){var e=$(this);e.hasClass("action-selected")||(e.siblings(".action-selected").trigger("hide-action"),e.addClass("action-selected").find(".action-subform").slideDown("fast",function(){if(t.subformShow&&t.subformShow($(this)),t.subformFocusInput){var e=$(this).find("input[type=text], textarea").not(".actual-edit-overlay").eq(0);e.length&&e.focus()}}),t.hideDescriptions&&e.find(".action-desc").slideDown("fast"),t.actionSelected&&t.actionSelected(e),i.find(".popup-submit").enable())}),o.click(function(){$(this).closest("li").trigger("show-action")}),i.appendTo(n.parent()),t.loaded&&t.loaded(i);var r=function(){};if(t.subformShow){var a=i.find("li.action-selected .action-subform");a.length>0&&(r=function(){a.each(function(){t.subformShow($(this))})})}if(t.lightbox){var s=$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");i.css("z-index",s.css("z-index")+1)}t.dontCenter||i.center().fadeIn("fast",r)},"error":function(e){var t=e.responseText||"Unable to load popup - please try again";n.parent().showErrorMessage(t,{"transient":409==e.status})},"complete":e.removeSpinner}),n},"asyncLoad":function(e){return e=$.extend({"callback":null,"cache":{}},e),this.each(function(){var t=".async-load",n=$(this),i=n.find(t);n.is(t)&&(i=i.add(n)),i.each(function(){var t=$(this),n=t.data("load-url")||"";if(n&&!t.is(":working")){t.working(!0).addSpinner();var i=function(n){t.html(n).removeClass("async-load").mathjax();var i=t.data("after-load")||"";if(i||e.callback){for(var o,r=i.split("."),a=0;a<r.length;a++)o=(o||window)[r[a]];o=o||e.callback,"function"==typeof o&&o(t)}},o=e.cache[n];o?window.setTimeout(function(){i(o)},0):$.ajax({"type":"GET","url":n,"dataType":"html"}).done(function(t){e.cache[n]=t,i(t)}).fail(function(){t.removeSpinner().showErrorMessage("An error has occurred; please try again")})}})})},"mathjax":function(){return this.each(function(){"undefined"!=typeof MathJax&&MathJax.Hub.Typeset(this)})},"elementNodesOnly":function(){return this.filter(function(){return 1===this.nodeType})},"outerHTML":function(){return $("<div>").append(this.eq(0).clone()).html()}})},StackExchange.helpers=function(){function e(e,t,n){for(var i=0;i<n.length;i++){var o=n[i];try{if(/\*/.test(o))for(var r=0;4>r;r++){var a=o.replace(/\*/g,c[r]),s=e.css(a);t.css(a,s)}else t.css(o,e.css(o))}catch(u){}}}function t(t,n,i,o){if(t.is(":visible")){var r=$.browser.msie?0:.4;if(!i())return t.css("opacity",1).css("filter","").removeClass("edit-field-overlayed"),void 0;t.css("opacity",r+(o?.2:0)),t.addClass("edit-field-overlayed");var a=t.prev(".actual-edit-overlay");if(0==a.length){var c=$.trim(s(t).text()),u=t.width(),l=t.height();a=t.clone().prop("className","actual-edit-overlay").attr("name",null).attr("id",null).attr("disabled","disabled").css({"position":"absolute","backgroundColor":"white","color":"black","-webkit-text-fill-color":"black","opacity":1,"width":u,"height":l}),a.is("textarea,input")?(a.val(c),e(n,a,["line-height"])):a.text(c).css("line-height",l+"px").prepend("&nbsp;"),e(n,a,["font-family","font-size","text-align"]),e(t,a,["border-*-style","border-*-color","border-*-width"]),t.css({"zIndex":1,"position":"relative"}),a.insertBefore(t);var d=t.offset().top-a.offset().top;if(0!=d){var h=parseInt(a.css("margin-top")),f=h+d;t.is("textarea")||(f=parseInt(a.prevAll(":visible").eq(0).css("margin-bottom"))+h),a.css("margin-top",f)}var p=t.offset().left-a.offset().left;if(0!=p){var m=parseInt(a.css("margin-left"));a.css("margin-left",m+p)}}}}function n(e,t){$(e).find("input[type='submit']").prop("disabled",t)}var i,o,r,a=function(){var e=function(){i=o=null,$("body").removeAttr("style")},t=$("div.popup");t.each(function(e,t){var n=$(t).find(".handle");n.length&&(n.css({"cursor":"move"}),n.unbind("mousedown").bind("mousedown",function(e){var n=$(t).offset();o={"x":n.left-e.pageX,"y":n.top-e.pageY},i=$(t);var r=i.offset();i.offset(r).offset(r),$("body").attr("style","cursor:move"),e.preventDefault()}))}),r||(r=!0,$(document).on("mousemove",function(e){if(i){var t=e.pageY+o.y,n=e.pageX+o.x;i.offset({"top":t,"left":n})}}).on("keypress",e).on("mouseup",e))},s=function(e){return e.parent().find("span.edit-field-overlay")},c=["left","right","top","bottom"],u={"bindMovablePopups":a,"genericBindOverlayEvents":function(e,n,i){StackExchange.options.isMobile||n.bind("keydown contextmenu",function(){u.hideHelpOverlay(e)}).focus(function(){t(e,n,i,!0)}).on("blur change",function(){t(e,n,i)}).each(function(){t(e,n,i)})},"bindHelpOverlayEvents":function(e){e.each(function(){var e=$(this);u.genericBindOverlayEvents(e,e,function(){return""===e.val()})})},"hideHelpOverlay":function(e){e.css("opacity",1),e.css("filter",""),e.removeClass("edit-field-overlayed")},"onClickDraftSave":function(e){return $(e).click(function(e){if(null!=StackExchange.cardiologist){e.preventDefault();var t=this.href;return StackExchange.cardiologist.ensureDraftSaved(function(){window.onbeforeunload=null,window.location.href=t}),!1}}),!0},"showMessage":function(e,t,n){if(e=$(e),e.length){var i={"position":"inside","dismissable":!0,"type":"error","closeOthers":!0},o=$.extend({},i,n),r=9;o.closeOthers&&$(".message").fadeOutAndRemove();var a=$('<div class="message"><div class="message-inner"><div class="message-text"></div></div></div>'),s=a.find(".message-inner"),c=a.find(".message-text");if(a.addClass("message-"+o.type),c.html(t),o.dismissable&&(a.addClass("message-dismissable"),c.css("padding-right","35px"),s.prepend($("<div />",{"title":"close this message (or hit Esc)","class":"message-close","text":"×"})),a.click(function(e){$(e.target).is("a")||a.fadeOutAndRemove()})),o.css&&a.css(o.css),"inside"==o.position||"inline"==o.position||o.tip||(o.tip=o.position.my),o.tip&&s.addClass("message-tip message-tip-"+o.tip.replace(" ","-")),"inline"==o.position)e.append(a);else if("inside"==o.position)a.css("position","absolute"),e.append(a);else{a.css("position","absolute");var u=e.offsetParent();u.append(a);var l,d=e.position(),h=e.outerWidth(!0),f=e.outerHeight(!0),p=a.outerWidth(),m=a.outerHeight();switch(o.position.at){case"top left":l={"top":0,"left":0};break;case"top center":l={"top":0,"left":h/2};break;case"top right":l={"top":0,"left":h};break;case"right top":l={"top":0,"left":h};break;case"right center":l={"top":f/2,"left":h};break;case"right bottom":l={"top":f,"left":h};break;case"bottom right":l={"top":f,"left":h};break;case"bottom center":l={"top":f,"left":h/2};break;case"bottom left":l={"top":f,"left":0};break;case"left bottom":l={"top":f,"left":0};break;case"left center":l={"top":f/2,"left":0};break;case"left top":l={"top":0,"left":0}}var g;switch(o.position.my){case"left top":g={"top":0,"left":-r};break;case"top left":g={"top":-r,"left":0};break;case"top right":g={"top":-r,"left":p};break;case"right top":g={"top":0,"left":p+r};break;case"right bottom":g={"top":m,"left":p+r};break;case"bottom right":g={"top":m+r,"left":p};break;case"bottom left":g={"top":m+r,"left":0};break;case"left bottom":g={"top":m,"left":-r}}var v={"left":d.left+l.left-g.left,"top":d.top+l.top-g.top};a.css({"top":v.top,"left":v.left})}return a.fadeIn(),o.transient&&setTimeout(function(){a.fadeOutAndRemove()},Math.max(2500,40*t.length)),o.removing&&a.on("removing",o.removing),a}},"showErrorMessage":function(e,t,n){var i={"position":"inside","type":"error"},o=$.extend({},i,n);return this.showMessage(e,t,o)},"showErrorPopup":function(e,t,n){return this.showErrorMessage(e,t,n)},"showInfoMessage":function(e,t,n){var i={"position":"inside","transient":!0,"type":"info"},o=$.extend({},i,n);return this.showMessage(e,t,o)},"removeMessages":function(){$(".message").fadeOutAndRemove()},"addSpinner":function(e,t){$(e).append(u.getSpinnerImg(t))},"getSpinnerImg":function(e){var t=$("<img />",{"class":"ajax-loader","src":"/content/img/progress-dots.gif","title":"loading...","alt":"loading..."});return e&&t.css(e),t},"removeSpinner":function(){$("img.ajax-loader").remove()},"closePopups":function(e){var t=$.Event("closePopups");t.selectorToClose=e,$(document).trigger(t)},"enableSubmitButton":function(e){n(e,!1)},"disableSubmitButton":function(e){n(e,!0)},"loadTicks":function(e){var t;t=e?e.find(".edit-block"):$(".edit-block"),0==t.find("input[name=i1l]").length&&(t.data("loading-ticks")||(t.data("loading-ticks",!0),$.ajax({"url":"/questions/ticks","cache":!1,"success":function(e){t.append("<input type='hidden' name='i1l' value='"+e+"' />")},"complete":function(){t.data("loading-ticks",!1)}})))},"showFancyOverlay":function(e){e=e||{};var t=$("#overlay-header"),n=e.message||"",i=$.browser.msie?{"background":"#fff","opacity":0}:{};e.showClose!==!1&&(n+='<br><a class="close-overlay">close this message</a>'),t.html(n).css(i).animate({"opacity":"1","height":"show"},"slow",e.complete).find(".close-overlay").click(function(){t.animate({"opacity":"0","height":"hide"},"fast")})},"DelayedReaction":function(e,t,n){n=n||{};var i,o,r=n.always,a=function(){i=null,e.apply(null,o)};return{"trigger":function(){if(o=arguments,r&&r.apply(null,o),i){if(!n.sliding)return;clearTimeout(i),i=setTimeout(a,t)}else i=setTimeout(a,t)},"cancel":function(){i&&(clearTimeout(i),i=null)}}},"fireAndForget":function(e){$.ajax({"type":"POST","url":e,"async":!0})}};return u}(),StackExchange.switchMobile=function(e){$.post("/mobile/"+e,{"returnurl":window.location.href},function(e){window.location.href=e})},StackExchange.switchLocale=function(e,t){$.post("/locale/"+e,{"returnurl":t},function(e){window.location=e})},jQuery.cookie=function(e,t,n){if("undefined"==typeof t){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),r=0;r<o.length;r++){var a=jQuery.trim(o[r]);if(a.substring(0,e.length+1)==e+"="){i=decodeURIComponent(a.substring(e.length+1));break}}return i}n=n||{},null===t&&(t="",n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,s="; expires="+c.toUTCString()}var u=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",d=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,u,l,d].join("")},jQuery.expr[":"].regex=function(e,t,n){var i=n[3].split(","),o=/^(data|css):/,r={"method":i[0].match(o)?i[0].split(":")[0]:"attr","property":i.shift().replace(o,"")},a="ig",s=new RegExp(i.join("").replace(/^\s+|\s+$/g,""),a);return s.test(jQuery(e)[r.method](r.property))},$.extend($.expr[":"],{"containsExact":function(e,t,n){return $.trim(e.innerHTML.toLowerCase())===n[3].toLowerCase()},"containsExactCase":function(e,t,n){return $.trim(e.innerHTML)===n[3]},"containsRegex":function(e,t,n){var i=/^\/((?:\\\/|[^\/])+)\/([mig]{0,3})$/,o=i.exec(n[3]);return RegExp(o[1],o[2]).test($.trim(e.innerHTML))}}),$.extend({"URLEncode":function(e){var t="",n=0;e=e.toString();for(var i=/(^[a-zA-Z0-9_.]*)/;n<e.length;){var o=i.exec(e.substr(n));if(null!=o&&o.length>1&&""!=o[1])t+=o[1],n+=o[1].length;else{if(" "==e[n])t+="+";else{var r=e.charCodeAt(n),a=r.toString(16);t+="%"+(a.length<2?"0":"")+a.toUpperCase()}n++}}return t},"URLDecode":function(e){for(var t,n=e,i=/(%[^%]{2})/;null!=(m=i.exec(n))&&m.length>1&&""!=m[1];)b=parseInt(m[1].substr(1),16),t=String.fromCharCode(b),n=n.replace(m[1],t);return n}}),function(e){e.fn.typeWatch=function(t){function n(t,n){var i=e(t.el).val();(i.length>o.captureLength&&i.toUpperCase()!=t.text||n&&i.length>o.captureLength)&&(t.text=i.toUpperCase(),t.cb(i))}function i(t){if("TEXT"==t.type.toUpperCase()||"TEXTAREA"==t.nodeName.toUpperCase()){var i={"timer":null,"text":e(t).val().toUpperCase(),"cb":o.callback,"el":t,"wait":o.wait};o.highlight&&e(t).focus(function(){this.select()});var r=function(e){var t=i.wait,o=!1;13==e.keyCode&&"TEXT"==this.type.toUpperCase()&&(t=1,o=!0);var r=function(){n(i,o)};clearTimeout(i.timer),i.timer=setTimeout(r,t)};e(t).keydown(r).bind("paste",null,function(e){e.which||r(this)}).bind("input",null,function(e){e.which||r(this)})}}var o=e.extend({"wait":750,"callback":function(){},"highlight":!0,"captureLength":2},t);return this.each(function(){i(this)})}}(jQuery),function(e){function t(t){var n;return t&&t.constructor==Array&&3==t.length?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3])]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?i.transparent:i[e.trim(t).toLowerCase()]}function n(n,i){var o;do{if(o=e.curCSS(n,i),""!=o&&"transparent"!=o||e.nodeName(n,"body"))break;i="backgroundColor"}while(n=n.parentNode);return t(o)}e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(i,o){e.fx.step[o]=function(e){e.colorInit||(e.start=n(e.elem,o),e.end=t(e.end),e.colorInit=!0),e.elem.style[o]="rgb("+[Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2]),255),0)].join(",")+")"}});var i={"transparent":[255,255,255]}}(jQuery),!function(e,t,n){"function"==typeof define?define(n):"undefined"!=typeof module?module.exports=n():t[e]=n(t)}("klass",this,function(e){function t(e){return r.call(n(e)?e:function(){},e,1)}function n(e){return typeof e===s}function i(e,t,n){return function(){var i=this.supr;this.supr=n[u][e];var o={}.fabricatedUndefined,r=o;try{r=t.apply(this,arguments)}finally{this.supr=i}return r}}function o(e,t,o){for(var r in t)t.hasOwnProperty(r)&&(e[r]=n(t[r])&&n(o[u][r])&&c.test(t[r])?i(r,t[r],o):t[r])}function r(e,t){function i(){}function a(){this.initialize?this.initialize.apply(this,arguments):(t||l&&s.apply(this,arguments),d.apply(this,arguments))}i[u]=this[u];var s=this,c=new i,l=n(e),d=l?e:this,h=l?{}:e;return a.methods=function(e){return o(c,e,s),a[u]=c,this},a.methods.call(a,h).prototype.constructor=a,a.extend=r,a[u].implement=a.statics=function(e,t){return e="string"==typeof e?function(){var n={};return n[e]=t,n}():e,o(this,e,s),this},a}e=e||this;var a=e.klass,s="function",c=/.*/,u="prototype";return t.noConflict=function(){return e.klass=a,this},t}),StackExchange.gps=function(){function e(e,t,n,i){t=t||{};var o=null;StackExchange.options&&StackExchange.options.user&&(t.user_type=StackExchange.options.user.userType,o=StackExchange.options.user.ab);var r={"evt":e,"properties":t,"now":(new Date).getTime()};o&&(r.ab=o),StackExchange._gps_track.push(r),i&&i()}return StackExchange._gps_track=[],{"track":e,"sendPending":function(e){e&&e()}}}(),function(){function e(e){var t=$("<div/>");return e in t[0].style&&/^translate3d|^matrix/.test(t.css(e,"translate3d(1px,1px,1px)").css(e))}function t(e,t){function n(n){var i={"source":a,"time":Date.now(),"count":s,"data":n};s++;var r=JSON.stringify(i);try{localStorage.setItem(e,r)}catch(c){}t&&setTimeout(function(){o(i)},0)}function i(e){c.length||window.addEventListener("storage",r),c.push(e)}function o(e){for(var t=0;t<c.length;t++)c[t](e.data,e)}function r(t){if(t.key===e){var n=JSON.parse(t.newValue);n.source!==a&&o(n)}}var a=Date.now()+"-"+Math.random(),s=0,c=[];return{"broadcast":n,"onReceive":i}}function n(e){return e=e||{},e.fkey=StackExchange.options.user.fkey,e}function i(e){return $.post(e,n())}function o(){$("#uc-error").slideUp(),I&&clearTimeout(I),I=null}function r(e){$("#uc-modal").removeClass("uc-loading"),$("#uc-error").hide().text(e).slideDown(),I&&clearTimeout(I),I=setTimeout(o,5e3)
}function a(e){return function(){r(e)}}function s(e){A=e,D.broadcast(e)}function c(){return A}function u(e,t){try{localStorage.setItem(e,t)}catch(n){}}function l(e,t){var n;try{n=localStorage.getItem(e)}catch(i){}return null===n||"undefined"==typeof n?t:n}function d(e){D.onReceive(e)}function h(e){$("#uc-powerup-store .uc-store-item:not(.uc-bought)").each(function(){var t=$(this),n=parseInt(t.find(".uc-price").text(),10);e>=n?t.removeClass("uc-cannot-buy").addClass("uc-can-buy"):t.removeClass("uc-can-buy").addClass("uc-cannot-buy")});var t=$("#uc-configure");t.length&&(e>=P?t.find(".uc-recycle").show():t.find(".uc-recycle").hide())}function f(e){var t=function(t){e.text(t).attr("title","your current balance is "+t+" Unicoins")};t(c()),d(t)}function p(e,t,n){var i=j[e],o=t();if(o.id=e,o.inherits?m(o.inherits,T[o.inherits.substring(0,4)]||"0").done(function(){var t=_[o.inherits];for(var n in t)t.hasOwnProperty(n)&&!o.hasOwnProperty(n)&&(o[n]=t[n]);_[e]=o,i.resolve()}):(_[e]=o,i.resolve()),!n){var r=t.toString(),a=L[e];a&&(r=a+":"+r,delete L[e]),u("uc:pu"+e,r)}}function m(e,t){var n=j[e];if(n)return n;j[e]=n=$.Deferred();var i=l("uc:pu"+e);if(i){var o="0";if(i=i.replace(/^(\w+):/,function(e,t){return o=t,""}),o===t)return p(e,eval.call(window,"("+i+")"),!0),n}return"0"!==t&&(L[e]=t),StackExchange.loadJsFile("unicoin/powerups/"+e+".js?v="+t,!0),n}function g(e,t){var n=$.Deferred(),i="0";return e=e.replace(/\?(\w*)$/,function(e,t){return i=t,""}),m(e,i).done(function(){var i=_[e];i.setOption&&i.setOption(t),i.enable(),i.enabled=!0,n.resolve(i)}),n.promise()}function v(e){for(var t=0;t<e.length;t++)g.apply(null,e[t])}function b(){for(var e in _)if(_.hasOwnProperty(e)){var t=_[e];t.enabled&&t.refresh&&t.refresh()}}function w(e){var t=_[e];t&&t.enabled&&(t.disable(),t.enabled=!1)}function y(e,t,n,o,u){$("<p>You bought this power-up for "+n+" Unicoins.</p>").appendTo(o),e.configure&&e.configure(o,function(t,n){return t?(x(!0),i("/unicoin/powerups/"+e.id+"/option/"+encodeURIComponent(n)).done(function(t){x(!1),t.success?(e.disable(),e.setOption(n),e.enable(),R.broadcast({"action":"setting","id":e.id,"setting":n}),u()):r(t.error)}).fail(a("An error occured while changing the power-up setting.")),void 0):(u(),void 0)}),$("<p>No longer interested in this power-up? No problem: Recycling a power-up is possible for a small fee of "+P+" Unicoins.</p>").css("margin-top",e.configure?"1em":"").appendTo(o),o.append($("<span class='uc-recycle'>recycle now</span>").click(function(){confirm('Recycle "'+t+'"? This will cost you '+P+" Unicoins.")&&(x(!0),i("/unicoin/powerups/recycle/"+e.id).done(function(t){return x(!1),t.success?(S(e.id),s(t.new_balance),w(e.id),R.broadcast({"action":"recycle","id":e.id}),u(),void 0):(r(t.error),void 0)}).fail(a("An error occured while trying to recycle the power-up.")))})),o.append($("<span class='uc-back-to-store'>back to the list</span>").click(u)),h(c())}function x(e){if(e)O&&(clearTimeout(O),O=null),q=Date.now(),$("#uc-modal").addClass("uc-loading");else{if(O)return;var t=q?Date.now()-q:1e3;O=setTimeout(function(){$("#uc-modal").removeClass("uc-loading"),O=null},Math.max(0,1e3-t))}}function k(e,t){$(".uc-store-item[data-uc-purchaseid='"+e+"']").removeClass("uc-can-buy uc-cannot-buy").addClass("uc-bought").attr("data-uc-id",t.replace(/\?.*$/,""))}function S(e){$(".uc-store-item[data-uc-id='"+e+"']").removeClass("uc-bought"),h(c())}function C(){function e(e,t,i,o){var r=$("<section class='hidden'><nav/><h1/></section>");return o&&r.attr("id",o),e?r.find("nav").text(e):r.find("nav").remove(),t?r.find("h1").text(t):r.find("h1").remove(),n.find("#uc-modal-content").append(r.append($("<div class='uc-content' />").html(i))),r}function t(){var e=parseInt($(this).text(),10);$(".uc-store-page").removeClass("uc-current").eq(e-1).addClass("uc-current")}$("<div id='lightbox' />").appendTo("body").show().css("height",$(document).height()),$("<div id='uc-lightbox-bg' />").appendTo("body");var n=$("<div id='uc-modal' class='popup'><div id='uc-modal-topbar'><span class='uc-balance-container'>&times <span class='uc-balance'/></span><span id='uc-modal-close'/></div><div id='uc-error'/><div id='uc-modal-content'></div></div>").appendTo("body").center().css({"position":"","top":Math.min(100,Math.max(0,$(window).height()/2-286))}).hide();n.find("#uc-error").click(o),e("mine coins","Mine More Unicoins","<p>Not enough Unicoins to buy that awesome power-up you want? Don't want to spend real money?</p><p>No problem &ndash; mine new Unicoins simply by hammering rocks!</p><p>But be quick; these rocks perish fast, and you never know which rocks contain coins.</p><div id='uc-start-mining'>Start Mining!</div>").find("#uc-start-mining").click(function(){return $(this).closest("section").addClass("hidden"),$("#uc-mining").removeClass("hidden"),F.start(function(e,t,n){for(var i=0;e>i;i++){var o=$("#uc-rockcanvas").position();!function(e){var i=$("<div class='uc-flying-coin' />").css({"left":o.left+t-50,"top":o.top+n-70,"width":20,"height":20}).insertBefore("#uc-rockcanvas").animate({"left":5,"top":-71,"width":100,"height":100},500+300*e,"linear",function(){StackExchange.uc.setBalance(StackExchange.uc.getBalance()+1),i.remove()})}(i)}}),!1});var u=e("buy coins","Purchase More Unicoins","");e("buy powers","The Power-Up Store","<div id='uc-powerup-store'/>"),e(null,null,"<canvas width='932' height='329' id='uc-shadowcanvas' /><canvas width='932' height='329' id='uc-perishingcanvas' /><canvas width='932' height='329' id='uc-rockcanvas' />","uc-mining"),e(null,"Power up with Unicoins!","<p>Improve your experience on <span class='uc-site-name'/> with powerful addons!</p><p>With our custom currency, Unicoins, you can now purchase exclusive power-ups that enhance your stay on this site and customize it to your own taste.</p><p>Choose <i>buy powers</i> to inspect our selection of currently available power-ups. Spent all your Unicoins already? Do not despair: Click <i>buy coins</i> to purchase additional Unicoins for an all-time low price, or click <i>mine coins</i> to earn more Unicoins <b>for free</b>!</p><p class='uc-legal'>Availability may be limited based on factors. Prohibited where void. Stack Exchange Inc. does not endorse or encourage behaviors that should not be endorsed or encouraged. Not legal tender except in localities with citizenship rights for unicorns. Stack Exchange Inc. reserves the right to amend, cancel, or continue this promotion for any reason, including, but not limited to, any reason that would interfere with the invariance, continuation, or non-existence thereof.</p>","uc-intro-text").removeClass("hidden").find(".uc-site-name").text(StackExchange.options.site.name),n.fadeIn("fast"),n.on("click","section.hidden",function(){n.find("section:not(.hidden)").addClass("hidden");var e=$(this);e.is(u)&&!e.find("iframe").length&&e.find(".uc-content").append("<iframe width='852' height='369' src='/unicoin/payment'><p>Loading&hellip;</p></iframe>"),e.removeClass("hidden"),F.stop()}),f(n.find(".uc-balance")),$("#uc-modal-close").click(function(){$(document).trigger("closePopups")}),$(window).one("popupClose",function(){F.stop(),n.remove(),$("#uc-lightbox-bg").remove()});var l=6;$.get("/unicoin/available-powerups").done(function(e){var o,u=$("<div id='uc-store-pager'>Page: </div>").on("click","span",t);e.powerups.forEach(function(e,t){t%l===0&&(o=$("<div class='uc-store-page' />").appendTo("#uc-powerup-store"),$("<span />").text(1+t/l|0).appendTo(u),0===t&&o.addClass("uc-current"));var n=$("<div class='uc-store-item'/>").appendTo(o).attr("data-uc-purchaseid",e.purchaseid);e.useid&&n.attr("data-uc-id",e.useid),e.isnew&&n.addClass("uc-new");$("<h2/>").text(e.name).appendTo(n),$("<p />").text(e.description).appendTo(n);$("<span class='uc-price' />").text(e.cost).appendTo(n),$("<div class='uc-info' />").appendTo(n),e.owned?n.addClass("uc-bought"):n.addClass(e.cost<=c()?"uc-can-buy":"uc-cannot-buy")}),u.appendTo("#uc-powerup-store"),n.on("click",".uc-can-buy",function(){var e=$(this);if(confirm('Buy "'+e.find("h2").text()+'" for '+e.find(".uc-price").text()+" Unicoins?")){var t=e.attr("data-uc-purchaseid");x(!0),i("/unicoin/powerups/buy/"+t).done(function(n){return x(!1),n.success?(s(n.new_balance),k(t,n.id),g(n.id,n.setting).done(function(i){R.broadcast({"action":"purchase","id":n.id,"purchaseid":t,"setting":n.setting}),i.configure&&e.click()}),void 0):(r(n.error),void 0)}).fail(a("An error occured while buying the power-up."))}}),n.on("click",".uc-bought:not(.uc-configuring)",function(){var e=$(this).addClass("uc-configuring"),t=e.attr("data-uc-id"),n=_[t],i=e.closest(".uc-store-page"),o=i.find(".uc-store-item");o.not(e).add(u).animate({"opacity":0},"fast",function(){$(this).css("visibility","hidden")});var r=o.eq(0);if(!r.is(e)){var a=r.position(),s=e.position();e.animate({"left":a.left-s.left,"top":a.top-s.top})}var c=$("<div id='uc-configure' />").insertAfter("#uc-powerup-store").hide().fadeIn();y(n,e.find("h2").text(),e.find(".uc-price").text(),c,function(){c.fadeOutAndRemove(),o.not(e).add(u).css("visibility","visible").animate({"opacity":1},"fast"),e.animate({"left":0,"top":0}).removeClass("uc-configuring")})})})}function E(e,t,n,i){if(!i&&1!==new Date(1e3*StackExchange.options.serverTime).getDate())return!1;T=n,s(e);var o;/^\/(?:questions(?:\/\d+.*)?)?$/.test(location.pathname)?(o=$("<div class='module' id='uc-sidebar-module'><span>You have <span class='uc-balance' />&nbsp;Unicoins<span style='width:0;display:inline-block;'>.</span></div>").prependTo("#sidebar"),f(o.find(".uc-balance"))):o=$([]);var r=$("<a id='uc-footer-link' href='#'>unicoins</a>").prependTo(".top-footer-links");r.add(o).click(function(){return C(),!1}),v(t),$(window).on("reputationchange",b),$(document).on("retag",function(){setTimeout(b,220)});var a=/\/users\/filter|\/posts\/\d+\/edit-submit|posts\/\d+\/ajax-load-mini|posts\/ajax-load-realtime/i;return $(document).ajaxComplete(function(e,t,n){n&&a.test(n.url)&&setTimeout(b,1)}),!0}if(!Date.now||!e("transform")&&!e("WebkitTransform")||!Array.prototype.map)return StackExchange.uc={"init":function(){return!1}},void 0;var T,I,M="uc:balance",A=l(M,100),P=10,_={},R=t("uc:powerupchange",!1);R.onReceive(function(e){switch(e.action){case"purchase":g(e.id,e.setting).done(function(){k(e.purchaseid,e.id)});break;case"setting":var t=_[e.id];t.disable(),t.setOption(e.setting),t.enable();break;case"recycle":w(e.id),S(e.id)}});var D=t("uc:balancechange",!0);D.onReceive(function(e){A=e}),d(h);var q,O,L={},j={},F=(StackExchange.uc={"onBalanceChange":d,"balanceDisplay":f,"setBalance":s,"getBalance":c,"init":E,"registerPowerup":p,"loading":x},function(){function e(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push((1-n)*e[o]+n*t[o]);return i}function t(e,t,n,i){this.born=Date.now(),this.broken=null,this.hits=0,this.x=t,this.y=n,this.id=e,this.distScale=i,this.outer=[],this.inner=[];for(var o=0;16>o;o++){var r=(.9+.2*Math.random())*i;this.outer.push(r),this.inner.push(r-.1+.3*Math.random())}this.sparks=[]}function n(e,t,n,i,o,r,a,s,c){e.save(),e.translate(t,n);var u=-1;e.save();for(var l,d,h=0;16>h;h++){c&&(h=15-h);var f=h/4|0;if(f!=u){switch(h/4|0){case 0:l=i,d=o;break;case 1:l=r,d=o;break;case 2:l=r,d=a;break;case 3:l=i,d=a}e.restore(),e.save(),e.scale(l,d),u=f}var p=h*C/4,m=s[h],g=m*Math.cos(p),v=-m*Math.sin(p);c&&(h=15-h),0===h?e.moveTo(g,v):e.lineTo(g,v)}e.restore(),e.restore(),e.closePath()}function o(e){for(var n,i,o,r,a,s=0,c=0,u=p.canvas.width,l=p.canvas.height;!o&&20>s;){s++,n=60+Math.random()*(u-120)|0,i=50+Math.random()*(l-70)|0,o=!0;for(var d=1e4,h=0;h<D.length;h++){var f=D[h].manhattan(n,i);d=Math.min(f,d),210>f&&(o=!1)}d>c&&(r=n,a=i,c=d)}o||(n=r,i=a),D.push(new t(e,n,i,.3+(i-50)/(l-70)*.7))}function a(e){var t=k;if(!e){var n=Date.now()-L;n>3e4&&(t=k+Math.min(1,(n-3e4)/6e4)*(y-k-3e3))}P=setTimeout(c,t)}function s(){r("There are problems connecting to the server. Please mine again later."),$("#uc-modal-content section:first").click()}function c(){$.get("/unicoin/rock").done(function(e){q=0,o(e.rock),a()}).fail(function(){q++,q>=3?s():a(!0)})}function u(e){i("/unicoin/mine?rock="+e.id).done(function(t){O=0,"Success"===t.result?e.setValue(t.value):e.setValue(0)}).fail(function(){O++,O>=3?s():e.setValue(0)})}function l(e){$(this).addClass("md");var t=Date.now();if(100>t-L)return!1;P&&t-L>3e4&&(clearTimeout(P),P=setTimeout(c,k)),L=t;for(var n=(e.originalEvent||e).touches,i=n&&n[0]?n[0]:e,o=i.pageX-$(this).offset().left,r=i.pageY-$(this).offset().top,a=0;a<D.length;a++){var s=D[a];Math.abs(s.x-o)<50*s.distScale&&Math.abs(s.y-25*s.distScale-r)<35*s.distScale&&s.hit(o,r)}return!1}function d(){$(this).removeClass("md")}function h(e){v=e,p=$("#uc-rockcanvas")[0].getContext("2d"),m=$("#uc-shadowcanvas")[0].getContext("2d"),g=$("#uc-perishingcanvas")[0].getContext("2d"),R=!0,O=0,q=0,c(),_=setInterval(function(){for(;D.length&&D[0].age()>y+3e3;)D.shift()},k);var t=Date.now()-16;!function n(){if(R){var e=Date.now(),i=Math.round((e-t)/16);t=e;var o=p.canvas.width,r=p.canvas.height;p.clearRect(0,0,o,r),m.clearRect(0,0,o,r),g.clearRect(0,0,o,r);for(var a=0;a<D.length;a++)D[a].draw(i);w(n)}}(),$("#uc-rockcanvas").on("mousedown touchstart",l).on("mouseup touchend",d)}function f(){R&&(R=!1,$("#uc-rockcanvas").off("mousedown touchstart",l).off("mouseup touchend",d),_&&(clearInterval(_),_=null),P&&(clearTimeout(P),P=null),p=m=g=null,D=[])}var p,m,g,v,b=function(e){return window[e+(e?"R":"r")+"equestAnimationFrame"]},w=b("")||b("webkit")||b("moz")||b("o")||b("ms")||function(e){setTimeout(e,40)},y=3e4,x=1e4,k=5e3,S=30,C=Math.PI/2,E=[60,50,60,20],T=[120,5,100,10],I=[220,220,220],M=[102,204,26],A=0;t.prototype.holdPhases=function(){this.phasesOverride=this.phases(),this.phasesOverrideTime=Date.now()},t.prototype.stopHoldingPhases=function(){var e=Date.now()-this.phasesOverrideTime;this.born+=e,this.broken+=e,delete this.phasesOverride,delete this.phasesOverrideTime},t.prototype.phases=function(){if(this.phasesOverride)return this.phasesOverride;var e={},t=this.age(),n=t-y+4e3;return e.is_perishing=!0,0>n?(e.perishing_col=0,e.perishing_size=0,e.is_perishing=!1):n>7e3?(e.perishing_col=1,e.perishing_size=1):(e.perishing_col=Math.min(1,n/5e3),e.perishing_size=(1-Math.cos(Math.PI*Math.max(0,Math.min(1,(n-2e3)/5e3))))/2),e.is_broken=!!this.broken,e},t.prototype.addSparks=function(e,t,n,i){for(var o=0;i>o;o++)this.sparks.push({"x":e,"y":t,"vx":-2.5+5*Math.random(),"vy":1-5*Math.random(),"s":n})},t.prototype.hit=function(e,t){if(!this.broken){var n=8;if(this.age()>y-3200&&(n=8-(this.age()-y+3200)/400),!(0>=n)){this.addSparks(e,t,5,n);var i=8*Math.random()|0;this.outer[i]*=.95,this.inner[i]*=.95,this.hits++,this.hits>S&&Date.now()-A>x&&(this.holdPhases(),this.broken=Date.now(),A=this.broken,u(this))}}},t.prototype.setValue=function(e){this.value=e,v(e,this.x,this.y),this.stopHoldingPhases(),this.addSparks(this.x,this.y,20,20)},t.prototype.age=function(){return Date.now()-this.born},t.prototype.manhattan=function(e,t){return Math.abs(e-this.x)+Math.abs(t-this.y)},t.prototype.draw=function(t){var i=I,o=E,r=this.age(),a=1,s=this.phases();m.save(),g.save(),p.save(),m.translate(this.x,this.y),g.translate(this.x,this.y),p.translate(this.x,this.y);var c=0,u=!1;if(300>r&&(a=Math.pow(1.01-Math.pow(r/300-.8,2)/4,20),o=o.map(function(e){return e*a})),s.is_perishing&&(o=e(E,T,s.perishing_size),i=e(I,M,s.perishing_col),g.globalAlpha=p.globalAlpha=m.globalAlpha=1-Math.pow(s.perishing_size,3),u=!0),s.is_broken){var a=1+5*Math.pow(Math.min((Date.now()-this.broken)/500,1),2);g.globalAlpha=p.globalAlpha=m.globalAlpha=(6-a)/5,a=1/a,o=o.map(function(e){return e*a})}m.save(),m.fillStyle="black",m.shadowBlur=5,m.shadowColor="rgba(0,0,0,.4)",m.shadowOffsetX=5e3,m.translate(-4997,.9*o[3]*this.distScale),m.scale(1,.2),m.beginPath(),n(m,0,0,o[0],o[1],o[2],o[3],this.outer),m.fill(),m.restore();var l=u&&!this.broken?g:p;l.beginPath(),n(l,0,10*s.perishing_size,o[0],o[1],o[2],o[3],this.outer),l.clip(),n(l,-5,-5+10*s.perishing_size,.85*o[0],o[1],o[2],o[3],this.inner,!0),l.fillStyle="rgb("+i.map(function(e){return e*(.7+.3*c)|0}).join(",")+")",l.fill(),l.moveTo(-2e3,-2e3),l.lineTo(2e3,-2e3),l.lineTo(2e3,2e3),l.lineTo(-2e3,2e3),l.closePath(),l.fillStyle="rgb("+i.map(function(e){return 0|e}).join(",")+")",l.fill(),(this.broken||this.phasesOverride)&&(l.save(),l.translate(0,-10),l.scale(a,a),l.beginPath(),l.moveTo(-10,-60),l.lineTo(0,0),l.lineTo(10,-60),l.closePath(),l.fillStyle="white",l.globalCompositeOperation="destination-out",l.globalAlpha=1,l.fill(),l.restore()),l.restore(),l.save(),l.fillStyle="#bbb",l.beginPath();for(var d=[];this.sparks.length;){var h=this.sparks.pop();h.x+=h.vx,h.y+=h.vy,h.vy+=.2*t,l.rect(h.x,h.y,h.s,h.s),h.y<=this.y+10&&d.push(h)}this.sparks=d,l.fill(),m.restore(),g.restore(),p.restore()};var P,_,R,D=[],q=0,O=0,L=Date.now();return{"start":h,"stop":f}}())}();